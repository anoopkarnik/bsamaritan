model Workflow {
  id                String   @id @default(uuid())
  nodes             Node[]
  name              String
  publish           Boolean? @default(false)
  description       String
  lastRun           String?
  events            Event[]
  User              User     @relation(fields: [userId], references: [id])
  userId            String


  @@schema("workflow_schema")
}

model Node {
  id                String   @id @default(uuid())
  name              String?
  description       String?
  type              String?
  workflowId        String
  actionType        String?
  subActionType     String?
  actionData        Json?
  actionId          String?
  worklows          Workflow @relation(fields: [workflowId], references: [id])
  userId            String?
  User              User?     @relation(fields: [userId], references: [id])
  sortingOrder      Int      @default(0)
  @@schema("workflow_schema")
}

model Event {
  id               String   @id @default(uuid())
  workflowId       String
  Workflows        Workflow @relation(fields: [workflowId], references: [id])
  status           String
  eventOutbox      EventOutbox?
 
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@schema("workflow_schema")
}

model EventOutbox {
  id                String   @id @default(uuid())
  eventId           String @unique
  event             Event @relation(fields: [eventId], references: [id])
  @@schema("workflow_schema")
}
